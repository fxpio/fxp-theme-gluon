//
// Forms
// --------------------------------------------------

label {
    font-weight: @font-family-weight-bold;
}

// Input
// --------------------------------------------------

.input-lg {
    border-radius: @input-border-radius-large;
}

.input-sm {
    border-radius: @input-border-radius-small;
}

input,
textarea {
    &.form-control {
        padding-left: 0;
        padding-right: 0;
        display: block;
        width: 100%;
        border: none;
        border-bottom: 1px solid transparent;
        outline: none;
        .box-shadow(none);
    }
}

input[type="submit"] {
    &.hidden {
        position: absolute;
        display: block !important;
        left: -9999px;
        width: 1px;
        height: 1px;
    }
}

textarea {
    resize: none;
}

legend {
    font-size: @font-size-h4;
}

.help-block {
    font-size: round(@font-size-base * 0.85);
    padding-left: 15px;
}

.form-label {
    .control-label();
    text-align: right;
    padding-top: 10px;

    .form-horizontal & {
        &.required::after {
            top: 0;
        }
    }
}

.form-group {
    &:first-child {
        margin-top: @form-group-first-margin-top;

        .form-inline > & {
            margin-top: 0;
        }

        .form-group {
            &:first-child {
                margin-top: 0;
            }
        }
    }
}

.form-group,
.floating-group {
    position: relative;

    input:not([type="submit"]),
    textarea {
        ~ label:not(.btn) {
            .form-floating-label();
            &.control-label {
                .control-label-required();
            }
        }

        ~ label.btn,
        ~ .input-group-btn label.btn {
            margin: 0;
        }

        &:focus,
        &.has-floating-content,
        &.fixed-floating-label {
            ~ label:not(.btn) {
                .form-floating-label-top();

                &.control-label.required::after {
                    .scale(0.7);
                }
            }
        }

        &:focus {
            ~ .floating-bar:before,
            ~ .floating-bar:after {
                width: 50%;
            }
        }
    }

    label.top-floating-label,
    label.top-floating-label-choice {
        .form-floating-label(@form-floating-label-color-focus);

        + div[data-prototype] {
            min-height: 10px;
        }
    }

    label.top-floating-label {
        .control-label-required();
        .form-floating-label-top();

        &.required::after {
            .scale(0.7);
        }
    }

    label.top-floating-label-choice {
        .control-label-required();
        .form-floating-label-top(-5);

        &.required::after {
            .scale(0.7);
        }
    }

    .floating-bar {
        position: relative;
        display: block;
        width: 100%;

        &:before,
        &:after {
            content: '';
            height: 2px;
            width: 0;
            bottom: 0;
            position: absolute;
        }

        &:before {
            left: 50%;
        }

        &:after {
            right: 50%;
        }
    }

    &.form-control {
        border: none;
        box-shadow: none;
        padding: 0;

        .form-control ~ label {
            top: @padding-base-vertical;
        }

        .floating-bar {
            position: initial;
        }
    }

    .input-group {
        .floating-bar {
            float: left;
        }
    }

    > div[class*="col-"] {
        > .input-group {
            width: 100%;
        }
    }
}

.form-horizontal {
    .control-label,
    .radio,
    .checkbox,
    .radio-inline,
    .checkbox-inline {
        padding-bottom: (@padding-base-vertical + 1); // Default padding plus a border
    }
}

input,
textarea {
    &[disabled],
    &[readonly],
    fieldset[disabled] & {
        border-bottom-style: dashed;
    }
}

// Input file
// --------------------------------------------------

.form-control {
    + .btn-file-input-text {
        float: right;
        margin-top: -@input-height-base;
    }
}

.form-control.input-lg + .btn-file-input-text {
    float: right;
    margin-top: -@input-height-large;
    height: @input-height-large;
    .button-size(@padding-large-vertical; @padding-large-horizontal; @font-size-large; @line-height-large; @input-border-radius-large);
}

.form-control.input-sm + .btn-file-input-text {
    float: right;
    margin-top: -@input-height-small;
    height: @input-height-small;
    .button-size(@padding-small-vertical; @padding-small-horizontal; @font-size-small; @line-height-small; @input-border-radius-small);
}

// Select
// --------------------------------------------------

select {
    &.form-control {
        font-weight: @font-family-weight;
        border: none;
        border-bottom: 1px solid transparent;
        outline: none;
        .box-shadow(none);

        padding-left: @padding-base-vertical / 2;
        padding-right: @btn-padding-horizontal * 1.5;

        &:hover {
            cursor: pointer;
        }

        &:focus,
        &:active {
            .box-shadow(@dropdown-shadow);
        }

        option {
            padding: 16px;
        }

        &[multiple] {
            option {
                margin-left: -@btn-padding-horizontal;
                margin-right: -@btn-padding-horizontal * 1.5;
                padding-left: @btn-padding-horizontal;
                padding-right: @btn-padding-horizontal * 1.5;
            }
        }

        + .help-block {
            float: left;
        }

        &[disabled],
        &[readonly],
        fieldset[disabled] & {
            cursor: not-allowed;
            opacity: 0.65;

            &:focus,
            &:active {
                .box-shadow(none);
            }
        }
    }
}

.has-error {
    .form-control {
        .box-shadow(none);
    }

    > select,
    > div > select {
        &.form-control {
            .box-shadow(none);

            &:focus,
            &:active {
                border-bottom-color: transparent;
                .box-shadow(@dropdown-shadow);
            }

            &[disabled],
            &[readonly],
            fieldset[disabled] & {
                &:focus,
                &:active {
                    .box-shadow(none);
                }
            }
        }
    }
}

// Date Choices
// --------------------------------------------------

.date-choice-wrapper {
    > select.form-control {
        width: auto;
        display: inline-block;
        padding-left: 0;
        padding-right: 0;
    }
}

.date-text-wrapper {
    > .floating-group {
        display: inline-block;
    }

    input.form-control {
        width: 24px;
        text-align: center;
        margin-left: 4px;
        margin-right: 4px;
    }

    > .floating-group:first-child input.form-control,
    > input.form-control:first-child {
        margin-left: 0;
    }

    > .floating-group:last-child input.form-control,
    > input.form-control:last-child {
        width: 40px;
        margin-right: 0;
    }

    &.date-text-block {
        .flexbox();
        .justify-content(space-between);

        > span {
            .flex-grow(0);
        }

        > div {
            text-align: center;
            .flex-grow(2);

        }

        input.form-control {
            margin: 0;
            width: 100%;
            min-width: 24px;
        }

        > .floating-group:last-child input.form-control,
        > input.form-control:last-child {
            width: 100%;
            min-width: 40px;
        }
    }
}

.form-group {
    .date-text-wrapper {
        &.date-text-block {
            > span {
                line-height: @input-height-base;
            }
        }
    }
}


// Checkbox / Radio
// --------------------------------------------------

.form-control-md {
    position: relative;

    // unchecked
    input[type="checkbox"],
    input[type="radio"] {
        width: @input-radio-checkbox-size;
        height: @input-radio-checkbox-size;
        padding: 0;
        margin: 0;
        position: absolute;
        vertical-align: top;
        opacity: 0;

        + .form-control-md-style {
            &:before,
            &:after {
                content: '';
                cursor: pointer;
                position: absolute;
                z-index: 1;
            }

            &:before {
                display: inline-block;
                margin: 0;
                width: @input-radio-checkbox-size;
                height: @input-radio-checkbox-size;
                top: 0;
                left: 0;
                background-color: @input-unchecked-bg;
                border: 2px solid transparent;
                vertical-align: top;
                .transition(@input-radio-checkbox-transition);
            }

            &:after {
                width: 0;
                height: 0;
                top: @input-radio-checkbox-size / 2 - 1;
                left: @input-radio-checkbox-size / 2 - 1;
                .transition(@input-radio-checkbox-transition);
            }

            + span {
                margin-left: @input-radio-checkbox-size + 8;

                &:empty {
                    margin-left: @input-radio-checkbox-size;
                }

                &:before {
                    content: "";
                    position: absolute;
                    display: inline-block;
                    top: 0;
                    left: 0;
                    width: @input-radio-checkbox-size;
                    height: @input-radio-checkbox-size;
                    .border-top-radius(50%);
                    .border-bottom-radius(50%);
                    .transform-origin(50% 50%);
                    .transition(box-shadow @input-radio-checkbox-transition);
                }
            }
        }
    }

    input[type="checkbox"] {
        + .form-control-md-style {
            &:before {
                .border-top-radius(2px);
                .border-bottom-radius(2px);
            }

            &:after {
                top: 0;
                left: 5px;
                width: 8px;
                height: 14px;
                border-style: solid;
                border-top: none;
                border-left: none;
                border-right-width: 2px;
                border-bottom-width: 2px;
                .transform(scale(0) rotate(45deg));
            }
        }
    }

    input[type="radio"] {
        + .form-control-md-style {
            &:before,
            &:after {
                .border-top-radius(50%);
                .border-bottom-radius(50%);
            }

            &:after {
                top: 5px;
                left: 5px;
                width: 8px;
                height: 8px;
                .scale(0);
            }
        }
    }

    // checked
    input[type="checkbox"]:checked {
        + .form-control-md-style {
            &:before {
                .border-top-radius(2px);
                .border-bottom-radius(2px);
            }

            &:after {
                .transform(scale(1) rotate(45deg));
            }
        }
    }

    input[type="radio"]:checked {
        + .form-control-md-style {
            &:after {
                .scale(1);
            }
        }
    }

    // disabled
    input[type="checkbox"][disabled],
    input[type="radio"][disabled],
    fieldset[disabled] & input[type="checkbox"],
    fieldset[disabled] & input[type="radio"] {
        + .form-control-md-style {
            &:before,
            &:after {
                cursor: not-allowed;
            }

            + span {
                cursor: not-allowed;
            }
        }

        &:focus,
        &:active {
            + .form-control-md-style {
                + span {
                    &:before {
                        display: none;
                    }
                }
            }
        }
    }
}

// Bootstrap checkbox/radio wrapper
.radio,
.checkbox {
    margin-top: 0;
    margin-bottom: 0;
    padding-top: 10px;
    padding-bottom: 10px;

    label {
        padding-left: 0;
        cursor: default;
    }
}

.radio-inline,
.checkbox-inline {
    cursor: default;
    padding: 10px 20px 10px 0;
}

.radio + .radio,
.checkbox + .checkbox {
    margin-top: 0;
}

.radio-inline + .radio-inline,
.checkbox-inline + .checkbox-inline {
    margin-left: 0;
    margin-top: 0;
    margin-bottom: 0;
}

.form-group {
    > .input-group {
        > .radio,
        > .checkbox,
        > .radio-inline,
        > .checkbox-inline {
            padding-top: 0;
            padding-bottom: 0;
        }
    }
}

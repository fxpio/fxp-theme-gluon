//
// Mixins
// --------------------------------------------------

@import "@{symfony-vendor-dir}/twitter/bootstrap/less/mixins.less";


// CSS3 PROPERTIES
// --------------------------------------------------

// Text shadows
.text-shadow(@shadow) {
    -webkit-text-shadow: @shadow; // iOS <4.3 & Android <4.1
            text-shadow: @shadow;
}

.text-longshadow (@color, @size, @darken: 10%) {
    .text-longshadowloop (@loopColor, @loopSize, @loopDarken, @initSize, @previousShadow: '') when (@loopSize >= 0) {
        .text-longshadowfinish (@string, @index) when (@index < 0) {
            .text-shadow(@string);
        }

        @percent: (1 - (@loopSize / @initSize)) * @loopDarken;
        @shadowColor: darken(@loopColor, @percent);
        @shadow: ~"@{shadowColor} @{loopSize}px @{loopSize}px@{previousShadow}";

        .text-longshadowfinish(@shadow, @loopSize - 1);
        .text-longshadowloop(@loopColor, @loopSize - 1, @loopDarken, @initSize, ", @{shadow}");
    }

    .text-longshadowloop(@color, unit(@size) - 1, unit(@darken), unit(@size) - 1);
}


// Button variants
// -------------------------
// Easily pump out default styles, as well as :hover, :focus, :active,
// and disabled options for all buttons
.button-variant-outline(@color; @background; @border) {
    color: @background;
    background-color: transparent;
    border-color: @border;

    &:hover,
    &:focus,
    &:active,
    &.active,
    .open .dropdown-toggle& {
        color: @color;
        background-color: @background;
    }
    &:active,
    &.active,
    .open .dropdown-toggle& {
        background-image: none;
    }
    &.disabled,
    &[disabled],
    fieldset[disabled] & {
        &,
        &:hover,
        &:focus,
        &:active,
        &.active {
            background-color: tranparent;
            border-color: @border;
        }
    }

    .badge {
        color: @color;
        background-color: @background;
    }

    &:hover,
    &:focus,
    &:active,
    &.active {
        .badge {
            color: @background;
            background-color: @color;
        }
    }
}

.button-variant-outline-inverse(@color; @background; @border) {
    color: @color;
    background-color: transparent;
    border-color: @color;

    &:hover,
    &:focus,
    &:active,
    &.active,
    .open .dropdown-toggle& {
        color: @background;
        background-color: @color;
    }
    &:active,
    &.active,
    .open .dropdown-toggle& {
        background-image: none;
    }
    &.disabled,
    &[disabled],
    fieldset[disabled] & {
        &,
        &:hover,
        &:focus,
        &:active,
        &.active {
            background-color: tranparent;
            border-color: @color;
        }
    }

    .badge {
        color: @background;
        background-color: @color;
    }

    &:hover,
    &:focus,
    &:active,
    &.active {
        .badge {
            color: @color;
            background-color: @background;
        }
    }
}


// Utilities
// -------------------------
.tab-focus() {
  outline: thin dotted;
  outline-offset: -2px;
}


// Form control focus state
// -------------------------
.form-control-focus(@color: @input-border-focus) {
  &:focus {
    .box-shadow(none);
  }
}


// Form control color (checkbox/radio)
// -------------------------

.form-control-color(@style: default) {
    @border-focus: "input-@{style}-border-focus";
    @checked-color: "input-@{style}-checked-color";
    @checked-bg: "input-@{style}-checked-bg";
    @checked-border-focus: "input-@{style}-checked-border-focus";

    label {
        &.form-control-fa {
            > input[type="checkbox"],
            > input[type="radio"] {
                &.input-@{style} {
                    + .form-control-fa-style {
                        &:hover {
                            border-color: @@border-focus;
                        }
                    }

                    &:checked {
                        + .form-control-fa-style {
                            color: @@checked-color;
                            background-color: @@checked-bg;
                            border-color:  @@checked-bg;

                            &:hover {
                                border-color: @@checked-border-focus;
                            }
                        }
                    }

                    &:focus {
                        + .form-control-fa-style {
                            border-color: @@border-focus;
                        }
                    }

                    &:checked:focus {
                        + .form-control-fa-style {
                            border-color: @@checked-border-focus;
                        }
                    }
                }
            }
        }
    }
}

.form-control-disabled-color(@style: default) {
    label.form-control-fa > input[type="checkbox"][disabled],
    label.form-control-fa > input[type="radio"][disabled],
    fieldset[disabled] label.form-control-fa > input[type="checkbox"],
    fieldset[disabled] label.form-control-fa > input[type="radio"] {
        + .form-control-fa-style {
            background-color: @input-bg-disabled;
            border-color: @input-border;
            color: inherit;

            &:hover {
                border-color: @input-border;
            }
        }
    }
}

// Block control (checkbox/radio)
// -------------------------

.block-control-color(@style: default) {
    @color: "input-@{style}-checked-bg";

    .block-control-fa-checkbox.block-@{style},
    .block-control-fa-radio.block-@{style} {
        color: @@color;
    }
}

// Panel variants
// -------------------------

.panel-variant-box(@style; @border; @bg-color; @border-inner-color; @text-color) {
    .panel {
        &.panel-@{style}-box {
            border-color: @border;
            background-color: @bg-color;
            color: @text-color;

            &,
            .panel-heading,
            .panel-body,
            .panel-footer {
                > a {
                    color: @text-color;

                    &:hover,
                    &:focus {
                        color: darken(@text-color, 2%);
                    }
                }
            }

            .panel-heading {
                border-bottom-color: @border-inner-color;

                > .panel-actions {
                    >.btn {
                        &:hover,
                        &:focus {
                            color: darken(@text-color, 10%);
                        }
                    }
                }

                > .panel-buttons {
                    border-top-color: @border-inner-color;
                    background-color: lighten(@bg-color, 3%);
                }
            }

            .panel-footer {
                border-top-color: @border-inner-color;
                background-color: @bg-color;

                > .panel-buttons {
                    border-bottom-color: @border-inner-color;
                    background-color: lighten(@bg-color, 3%);
                }
            }
        }
    }

    .panel-heading.panel-@{style}-box {
        border-bottom-color: @border-inner-color !important;
        background-color: @bg-color;
        color: @text-color;
        margin: -1px -1px 0 -1px;
        .border-top-radius(@panel-border-radius);

        > .panel-buttons {
            border-top-color: @border-inner-color;
            background-color: lighten(@bg-color, 3%);
        }
    }

    .panel-body.panel-@{style}-box {
        background-color: @bg-color;
        color: @text-color;
        margin: 0 -1px;

        &:first-child {
            .border-top-radius(@panel-border-radius);
        }

        &:last-child {
            .border-bottom-radius(@panel-border-radius);
        }
    }

    .panel-footer.panel-@{style}-box {
        border-top-color: @border-inner-color !important;
        background-color: @bg-color;
        color: @text-color;
        margin: 0 -1px -1px -1px;
        .border-bottom-radius(@panel-border-radius);

        > .panel-buttons {
            border-bottom-color: @border-inner-color;
            background-color: lighten(@bg-color, 3%);
        }
    }
}

.panel-variant-top(@style; @border-color; @border-height) {
    .panel {
        &.panel-@{style}-top {
            padding-top: @border-height;
            .border-top-radius(0);

            &:before {
                content: "";
                float: left;
                width: 100%;
                margin-top: -@border-height;
                height: @border-height - 2;
                outline: 1px solid @border-color;
                background-color: @border-color;
            }
        }
    }
}

.panel-variant-wire(@style; @heading-color) {
    .panel {
        &.panel-@{style}-wire {
            background-color: transparent;
            border-color: @panel-inner-border;
            .box-shadow(none);

            > .panel-heading {
                color: @heading-color;

                .panel-actions {
                    color: @text-color;
                }
            }

            > .panel-heading,
            > .panel-footer {
                background-color: transparent;

                > .panel-buttons {
                    background-color: transparent;
                }
            }
        }
    }
}

.panel-variant-frame(@style; @heading-color) {
    .panel {
        &.panel-@{style}-frame {
            > .panel-heading {
                color: @heading-color;
                border-color: transparent;

                .panel-actions {
                    color: @text-color;
                }
            }

            > .panel-heading,
            > .panel-footer {
                border-color: transparent;

                > .panel-buttons {
                    border-color: transparent;
                    background-color: transparent;
                }
            }
        }
    }
}

.panel-variant-lite(@style; @heading-color) {
    .panel {
        &.panel-@{style}-lite {
            background-color: transparent;
            .box-shadow(none);
            &:before {
                float: none;
                width: inherit;
                margin-top: inherit;
                height: inherit;
                outline: inherit;
                background-color: inherit;
            }

            > div {
                padding-left: 0;
                padding-right: 0;
            }

            > .panel-heading {
                color: @heading-color;
                border-color: transparent;

                .panel-actions {
                    color: @text-color;
                    margin-right: 0;
                }
            }

            > .panel-heading,
            > .panel-footer {
                border-color: transparent;
                background-color: transparent;

                > .panel-buttons {
                    border-color: transparent;
                    background-color: transparent;
                    margin-left: 0;
                    margin-right: 0;
                }
            }
        }
    }
}
